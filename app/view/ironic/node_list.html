<div class="row">
  <div class="col-xs-12">
    <button ng-click="nodeListCtrl.enroll()" class="btn btn-default pull-right-bottom">
      <i class="fa fa-gear"></i>
      Enroll Node
    </button>
    <h1>Nodes</h1>
  </div>
</div>
<div class="row">
  <div class="col-xs-12">
    <table class="table table-condensed table-striped">
      <thead>
      <tr>
        <th>Power State</th>
        <th>UUID</th>
        <th>Instance</th>
        <th>Provision State</th>
        <th>Maintenance</th>
      </tr>
      </thead>
      <tbody ng-if="nodeListCtrl.nodes.$resolved && nodeListCtrl.nodes.length > 0">
      <tr ng-repeat="node in nodeListCtrl.nodes">
        <td>

          <!-- Four power states: 'power on', 'power off', 'rebooting', and <no value> -->
          <div class="text-muted" ng-if="!node.power_state">
            <i class="fa fa-power-off"></i> Unknown
          </div>
          <div class="text-muted" ng-if="node.power_state == 'rebooting'">
            <i class="fa fa-spin fa-cog"></i> Rebooting
          </div>
          <div class="text-muted" ng-if="!!node.power_state && node.power_state != 'rebooting'">
            <div dropdown is-open="status.isopen" class="btn-group">
              <button type="button"
                      class="btn btn-default"
                      dropdown-toggle
                      ng-disabled="true">
                <span ng-if="node.power_state == 'power on'">On</span>
                <span ng-if="node.power_state == 'power off'">Off</span>
                <i class="fa fa-caret-down"></i>
              </button>
              <ul class="dropdown-menu">
                <li role="menuitem" ng-if="node.power_state == 'power off'">
                  <a href="#" ng-click="nodeListCtrl.setPowerState(node, 'power on')">On</a>
                </li>
                <li role="menuitem" ng-if="node.power_state == 'power on'">
                  <a href="#" ng-click="nodeListCtrl.setPowerState(node, 'power off')">Off</a>
                </li>
              </ul>
            </div>
          </div>
        </td>
        <td>
          <a href="#/ironic/nodes/{{node.uuid}}/node">
            {{node.uuid}}
          </a>
        </td>
        <td>{{node.instance_uuid || 'None'}}</td>
        <td>{{node.provision_state}}</td>
        <td>{{node.maintenance}}</td>
      </tr>
      </tbody>
      <tbody ng-if="nodeListCtrl.nodes.$resolved && nodeListCtrl.nodes.length == 0">
      <tr>
        <td colspan="5" class="text-center text-muted">
          <small><em>No nodes were found.</em></small>
        </td>
      </tr>
      </tbody>
      <tbody ng-if="!nodeListCtrl.nodes.$resolved">
      <tr>
        <td colspan="5" class="text-center text-muted">
          <i class="fa fa-refresh fa-spin"></i>
          Loading nodes...
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
